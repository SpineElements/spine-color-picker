<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../paper-styles/default-theme.html">

<!--
 An interactive list item to display one specific color.
-->
<dom-module id="spine-color-picker-item">
    <template>
        <style>
            :host {
                display: inline-block;
                box-sizing: border-box;
                width: var(--spine-heatmap-color-picker-item-size, 24px);
                height: var(--spine-heatmap-color-picker-item-size, 24px);
                margin-right: var(--spine-heatmap-color-picker-space-between, 1px);
                margin-bottom: var(--spine-heatmap-color-picker-space-between, 1px);
                cursor: pointer;
                transition: ease all .2s;
                text-align: center;
                line-height: var(--spine-heatmap-color-picker-item-size, 24px);
                border: 1px solid rgba(0, 0, 0, .08);
            }

            :host([active]) {
                border-radius: calc(var(--spine-heatmap-color-picker-item-size, 24px) / 2);
            }

            :host([selected]) iron-icon {
                visibility: visible;
            }

            :host([dark-theme]) iron-icon {
                color: var(--dark-theme-text-color);
            }

            :host([light-theme]) iron-icon {
                color: var(--light-theme-text-color);
            }

            iron-icon {
                height: calc(var(--spine-heatmap-color-picker-item-size, 24px) - 6px);
                top: -1px;
                left: -1px;
                visibility: hidden;
            }
        </style>

        <iron-icon icon="icons:check"></iron-icon>
    </template>

    <script>{
        class SpineColorPickerItem extends Polymer.Element {
            static get is() {
                return 'spine-color-picker-item';
            }

            static get properties() {

                /**
                 * Fired when `selected` property becomes true.
                 *
                 * @event spine-color-item-select
                 * @param {string} value Selected color
                 */
                return {
                    /**
                     * If true, `iron-icon` is shown.
                     */
                    active: {
                        type: Boolean,
                        reflectToAttribute: true
                    },

                    /**
                     * If true, the `spine-color-item-select` event is fired.
                     */
                    selected: {
                        type: Boolean,
                        reflectToAttribute: true,
                        observer: '__selectedObserver'
                    },

                    reflectToStyle: {
                        type: Boolean,
                        value: true,
                        readOnly: true
                    }
                }
            }

            __selectedObserver(value) {
                if (value) {
                    this.dispatchEvent(this.__createItemSelectedEvent());
                }
            }

            __createItemSelectedEvent() {
                return new CustomEvent('spine-color-item-select', {
                    detail: {value: this.bgColor},
                    bubbles: true,
                    composed: true
                });
            }

        }

        window.customElements.define(SpineColorPickerItem.is, SpineColorPickerItem);
    }</script>
</dom-module>
